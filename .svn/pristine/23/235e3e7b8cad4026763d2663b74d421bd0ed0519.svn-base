
var app;

(function () {

    app = angular.module("RoomMaster", []);

})();

app.service('RoomService', function ($http) {

    this.setRoomDetails = function (sub) {

        return $http({
            data: sub,
            method: "post",
            contentType: "application/json; charset=utf-8",
            url: "/home/GetHotelRezData",

        });


    };
});






app.controller('demoController', function ($scope, $http, $window) {


    $scope.hname = "";
    $scope.address = "";
    $scope.roomid = "";
    $scope.refference = "";
    $scope.board = "";
    $scope.roomoptions = "";
    $scope.aminities = "";
    $scope.name = "";
    $scope.distance = "";
    $scope.price = "";
    $scope.aminitylist = "";
    $scope.room = "";

    $scope.roomtype = ["Deluxe Room", "Superior Room", "Executive Room", "Pacific Room", " Pacific Suite", "Deluxe Suite", "Executive Suite", "Presidential Suite"];
    $scope.aminity = ["Balcony", "Cable channels", "Telephone", "Flat-screen TV", "Iron", "Suit press", "Ironing facilities", "Sitting area", "Heating", "Sofa", "Soundproof", "Wardrobe/Closet", "Cleaning products", "Hairdrye", "WiFi", "Free toiletries", "Shower", "Toilet", "Bathroom", "Slippers", "Bathtub or shower", "Guest bathroom", "Bidet", "Toilet paper", "Dining area", "Electric kettle", "Barbecue", "Dining table", "Outdoor furniture", "Soundproof", "Outdoor dining area", "Wake-up service", "Towels/Sheets", "Linens", "Satellite channels", "Suit press", "Outdoor furniture", "Outdoor dining area", "Free Parking", "Wardrobe/Closet", "Non-smoking Rooms", "Airport Shuttle", "Family Rooms", "Tour Desk", "Room Service", "Very Good Breakfast"];
    $scope.btype = ["Full Board", "Half Board", "Room Only"];



    var x = 0;

    $scope.add = function () {
        if ($scope.name == "" || $scope.distance == "" || $scope.distance == null) {
            alert("Please fill out this field.");
            return false;
        }

        console.log($scope.name);
        
        if (x == 0) {

            $scope.items = [{
                name: $scope.name,
                distance: $scope.distance

            }];
           
        }
        else {

            $scope.items.push({

                name: $scope.name,
                distance: $scope.distance

            });
          
            console.log("dd");
           
        }

        x++;
        
    };


    $scope.removeitems = function (index) {
        $scope.items.splice(index, 1);
    };

    //begin aminity list

    $scope.aminitylist = [

    ];

    $scope.add1 = function () {
        if ($scope.aminities == "") {
            alert("Please fill out this field.");
            return false;
        }


        $scope.aminitylist.push($scope.aminities);
        $scope.aminities = '';
        //$scope.aminitylist.add($scope.aminities);
    };

    $scope.remove = function (index) {
        $scope.aminitylist.splice(index, 1);
    };

    //end aminity list

    $scope.save = function () {
        if ($scope.hname == "" || $scope.address == "" || $scope.roomid == "" || $scope.refference=="" || $scope.boardoptions == "" || $scope.roomoptions == "" || $scope.price == "") {
            alert("Please fill out this field.");
            return false;
          

        }
        var sub = {
            HotelName: $scope.hname,
            Address: $scope.address,
            RoomId: $scope.roomid,
            Refference: $scope.refference,
            BoardType: $scope.board,
            Aminities: $scope.aminities,
            NearbyName: $scope.name,
            NearbyDistance: $scope.distance,
            Price: $scope.price,
            Aminitylist: $scope.aminitylist,
            RoomType: $scope.room,
            NearByPlaces:$scope.items

        };
        console.log($scope.hname);
        console.log($scope.aminitylist);
        console.log($scope.items);

        var getRoomDetails = "";
       // getRoomDetails = RoomService.setRoomDetails(sub);

        var post = $http({
            method: "POST",
            url: "/Home/GetHotelRezData",
            dataType: 'json',
            data: sub,
            headers: { "Content-Type": "application/json" }
        });

        post.then(function (d) {
 
            console.log("success");
            $window.alert(d.data);

        }, function (d) {
            $window.alert("Oops!! Something went wrong!!!!.");
        });
    }





});




