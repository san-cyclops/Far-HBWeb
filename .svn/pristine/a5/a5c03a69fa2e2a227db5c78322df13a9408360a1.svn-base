@model WebUI.Models.HotelBooking
@{
    ViewBag.Title = "Booking";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<style>
    #wrapper {
        font: 20px Calibri;
        width: 100px;
        margin: 0 auto;
    }

    table, tr, td, th {
        border: 1px solid #ccc;
        color: black;
        margin: 10px;
        padding: 10px;
    }

    .search_again_wrapper {
        background: #f3f3f3;
        box-shadow: 2px 2px 2px 1px #757575 !important;
    }

    .hotel_result .result-block {
        margin: 0 0 8px;
        background: #fff;
        -webkit-border-radius: 2px;
        -moz-border-radius: 2px;
        -ms-border-radius: 2px;
        border-radius: 2px;
        border: .5px solid #d8d8d8;
        padding: 8px;
    }

        .hotel_result .result-block .hotel-des .maptext p span.freeconcellation {
            color: #3fbf86;
            padding-left: 0;
            font-size: .9em;
        }

        .hotel_result .result-block .hotel-des .detail-box .pricing-box {
            padding-left: 0;
            border-left: none;
        }

        .hotel_result .result-block .hotel-des .star {
            padding: 3px 0 0 2px;
        }

        .hotel_result .result-block .hotel-des .hotdeal p span.hotdealbox {
            font-size: .7em;
            width: auto;
        }

        .hotel_result .result-block .hotel-des .hotel-name h2 {
            font-size: 1.2em;
        }

        .hotel_result .result-block .hotel-des .hotdeal .hotdealpro {
            padding-left: 5px;
        }

        .hotel_result .result-block .hotel-des .detail-box .pricing-box .hotel_price {
            font-size: 1em;
        }

        .hotel_result .result-block .hotel-des .maptext p span.cityname {
            font-size: .9em;
        }

        .hotel_result .result-block .hotel-des .detail-box .pricing-box p {
            text-align: right;
            margin: 0;
            font-size: .86em;
        }
</style>

<style>
    /*##star Rating Styles ----------------------*/
    .stars {
        padding-top: 10px;
        width: 100%;
        display: inline-block;
    }

    span.glyphicon {
        padding: 5px;
    }

    .glyphicon-star-empty {
        color: #9d9d9d;
    }

    .glyphicon-star-empty,
    .glyphicon-star {
        font-size: 18px;
    }

    .glyphicon-star {
        color: #FD4;
        transition: all .25s;
    }

        .glyphicon-star:hover {
            transform: rotate(-15deg) scale(1.3);
        }

    .center {
        width: 100px;
        height: 100px;
        position: absolute;
        top: 0;
        bottom: 0;
        left: 0;
        right: 0;
        margin: auto;
    }
    .child {
  position: absolute;
  left: 50%;
  top: 20%;
  transform: translate(-50%, -50%);
  width: 20em;
  height: 10em;
 
}
</style>
<link rel="stylesheet" href="../../Content/common.css" type="text/css">
<link rel="stylesheet" href="../../Content/loaded.css" type="text/css">




<script src="../../Scripts/angular.js"></script>



<script type="text/javascript">

    var data = @Html.Raw(Json.Encode(Model));

</script>






<div data-ng-app="APIModule">
    <div ng-controller="APIController">


        @* ****** Begin Booking Form *******@
        <div ng-hide="loaded">
            
            <div class="child">
                <img src="http://tag2travel.com/public/loading.gif" border="0" width="200" height="200" alt="" /></> <br />
                <br/>
                <p> Your search may take a few minutes.<br/> Thank you for your patience!</p>
            </div>

        </div>
         

        <div ng-cloak="" ng-show="loaded" class="col-xs-12 col-sm-12 col-md-12" style="background-color: #ececec; padding-left: 15px; padding-bottom: 10px;">


            @* ****** End Booking Form *******@
            <div class="col-xs-12 col-sm-12 col-md-12" style="padding-top: 30px; background-color: brown">
            </div>

            <div class="search_again_wrapper search-again">

                <div class="container">

                    <div class="row">
                        <div class="clearfix searchagain">

                            <div class="col-md-4 col-cm-12 col-lg-4 col-xs-12 col-sm-5">

                                <p class="wording_f ">
                                    <span class="search-again-click"> {{respData.hotels[0].destinationName}}   </span>
                                    <span class="city" style="display: none;"> Singapore </span>
                                </p>

                            </div>

                            <div class="advance-option">

                                <div class="col-md-3 col-cm-6 col-lg-3 col-xs-6 col-sm-2">
                                    <p class="wording_a">

                                        <span class="icon"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                                        <span class="month">{{respData.checkIn}} </span>
                                    </p>

                                </div>
                                <div class="col-md-3 col-cm-6 col-lg-3 col-xs-6 col-sm-2">
                                    <p class="wording_a">

                                        <span class="icon"><i class="fa fa-calendar" aria-hidden="true"></i></span>
                                        <span class="month">{{respData.checkOut}} </span>

                                    </p>

                                </div>

                                <div class="col-md-2 col-cm-12 col-lg-2 col-xs-12 col-sm-3">

                                    @*<p class="wording_f"> <a href="#" class="form-control btn searchagain_btn" data-toggle="modal" data-target=".bd-example-modal-lg"> <i class="fa fa-search" aria-hidden="true"></i> Modify Search </a> </p>*@
                                </div>

                            </div>

                        </div>
                        <!-- ================================= Start search again (Modify Search) ================================ -->
                    </div>

                </div>

            </div>



            <div class="main_wrapper">

                <div class="container">

                    <div class="row">


                        <div class="col-md-3 col-lg-3 col-xs-12 col-sm-12  filter-role">

                            <div class="clearfix filter">

                                <!-- ====================== Start hotel mapview ============================== -->
                                <div class="hotel_mapview hide">

                                    <p class="text-center"> <span class="map-location"> </span> <span>Search by map</span> </p>

                                </div>
                                <!-- ======================== End hotel mapview ============================ -->

                            </div>

                            <div class="clearfix serach">

                                <!-- ======================= Start hotel destination search =============================== -->
                                <div class="clearfix hotel-destination-search">

                                    <p>Hotel name</p>

                                    <div class="clearfix hotel_filter">

                                        <input ng-model-options="{debounce: 500}" ng-model="hotelName" class="form-control ng-pristine ng-untouched ng-valid" placeholder="Search hotel" type="text">
                                        <i class="fa fa-search" aria-hidden="true"></i>
                                    </div>

                                </div>
                                <!-- ======================================== End hotel destination search ============================== -->

                            </div>

                            <div class="clearfix filterset">

                                <!-- ============================= Start Filter your search ========================== -->
                                <div class="clearfix filter-block">

                                    <p>Filter your search</p>

                                </div>
                                <!-- =============================== End Filter your search =================================== -->

                            </div>


                            <div class="clearfix set-of-filter">
                                <!-- ============================ Start star ratings ============================== -->
                                <div class="col-md-12 col-sm-4 setfilter">

                                    <p>Star Ratings</p>

                                    <div class="clearfix price star-click-ev" ng-click="HotelApiRequestStars(1, this)">
                                        <div class="pull-left">
                                            <p ng-click="filters.hotelstar = link.hotelstar=1">
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i>
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">[{{getCount("1")}}]</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price star-click-ev">
                                        <div class="pull-left">
                                            <p ng-click="filters.hotelstar = link.hotelstar=2">
                                                <i class="fa fa-arrow-right " aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i>
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">[{{getCount("2")}}]</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price star-click-ev">
                                        <div class="pull-left">
                                            <p ng-click="filters.hotelstar = link.hotelstar=3">
                                                <i class="fa fa-arrow-right " aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i>
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">[{{getCount("3")}}]</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price star-click-ev">
                                        <div class="pull-left">
                                            <p ng-click="filters.hotelstar = link.hotelstar=4">
                                                <i class="fa fa-arrow-right " aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star-o star" aria-hidden="true"></i>
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">[{{getCount("4")}}]</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price star-click-ev">
                                        <div class="pull-left">
                                            <p ng-click="filters.hotelstar = link.hotelstar=5">
                                                <i class="fa fa-arrow-right " aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i> <i class="fa fa-star star" aria-hidden="true"></i>
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">[{{getCount("5")}}]</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                </div>
                                <!-- ============================= End star ratings ========================== -->
                                <!-- ========================== Start setfilter ============================= -->
                                <div class="col-md-12 col-sm-4 setfilter">

                                    <p>Price Range</p>

                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> Less Than LKR 3000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("0","3000")}})</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> LKR 3000 to LKR 6000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("3000","6000")}})</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> LKR 6000 to LKR 9000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("6000","9000")}})</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> LKR 9000 to LKR 12000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("9000","12000")}})</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> LKR 12000 to LKR 15000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("12000","15000")}})</p>
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                    <div class="clearfix price checkbox_click_ev">
                                        <div class="pull-left">
                                            <p>
                                                <i class="fa fa-arrow-right" aria-hidden="true"></i> Greater Than LKR 15000
                                            </p>
                                        </div>
                                        <div class="pull-right">
                                            <p class="ng-binding">({{getPriceRange("15000","100000")}})</p>
                                            @*<a ng-click="filters.hotelstar = link.hotelstar=1">xxxxxxxxxx</a>
                                                <a ng-click="filters.minRate = link.hotelstar>=1">xxxxxxxxxx</a>*@
                                        </div>
                                        <p>
                                            <input hidden="hidden" type="checkbox">
                                        </p>
                                    </div>
                                </div>
                                <!-- ========================== End setfilter =============================== -->
                            </div>
                        </div>
                        <!-- ================================== End side bar ================================= -->
                        <div class="col-md-9  hotel_result col-lg-9 col-xs-12 col-sm-12">
                            <div class="clearfix result_header">
                                <h4 class="ng-binding"><b>{{respData.hotels[0].destinationName}}</b> : {{respData.hotels.length}} Properties. Showing 1-{{respData.hotels.length}} </h4>
                                <p id="filterTab" class="hide">
                                    Filters :
                                    <span style="cursor: pointer;" id="hotelFilter" ng-click="HotelApiClearFilters()" class="badge bg-success hide ng-binding">  <span title="Clear Hotel Filter" class="filter-close-btn">x</span></span>
                                    <span style="cursor: pointer;" id="starFilter" class="badge bg-success hide"> Star <span class="filter-close-btn">x</span></span>
                                    <span style="cursor: pointer;" id="priceFilter" class="badge bg-success hide"> Price <span class="filter-close-btn">x</span></span>
                                    <span style="cursor: pointer;" id="clearFilter" ng-click="HotelApiClearFilters()" class="badge bg-success hide"> Clear filters <span class="filter-close-btn">x</span></span>
                                </p>

                            </div>
                            @*<div class="clearfix result_header" style="padding: 6px 0px; border: 1px #ccc solid; margin-bottom: 16px; background-color: white; color: #9a9696; padding-bottom: 5px; border-radius: 2px; margin-top: 7px;">
                                <div class="btn-group">
                                    <span style="padding: 5px 24px;" class="text-info" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Sort by
                                    </span>
                                </div>
                                <div style="padding: 0px 24px; cursor: pointer;" class="btn-group">
                                    <span class="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Star <span class="caret"></span>
                                    </span>
                                    <ul class="dropdown-menu">
                                        <li ng-click="SortResults('sa')"><a href="#">Star( 1 ... 5 )</a></li>
                                        <li role="separator" class="divider"></li>
                                        <li ng-click="SortResults('sd')"><a href="#">Star( 5 ... 1 )</a></li>
                                    </ul>
                                </div>
                                <div style="padding: 0px 24px; cursor: pointer;" class="btn-group">
                                    <span class="" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Price <span class="caret"></span>
                                    </span>
                                    <ul class="dropdown-menu">
                                        <li ng-click="SortResults('pa')"><a href="#">Price, low to high</a></li>
                                        <li role="separator" class="divider"></li>
                                        <li ng-click="SortResults('pd')"><a href="#">Price, high to low</a></li>
                                    </ul>
                                </div>
                            </div>*@



                            @*******************************    <!-- Start first result block -->*@

                            <div ng-repeat="hotel in respData.hotels |filter:{ name: hotelName }  | filter:filters " class="result-block clearfix ng-scope">
                                @*hotel in respData.hotels*@

                                <div class="col-md-3 col-lg-3 col-cm-3 col-xs-12 col-sm-3 img-sec">
                                    <img class="img-responsive" style="max-height: 138px; min-height: 138px;" src="{{hotel.imagepath}}" alt="img">
                                </div>

                                <div class="col-md-9 col-lg-9 col-cm-9  col-xs-12 col-sm-9 hotel-des">

                                    <!-- ======================= Start hotel details ============================== -->

                                    <div class="pull-left col-md-8 col-sm-8 col-cm-8">
                                        <div class="clearfix">

                                            <div class="pull-left hotel-name">
                                                <h2 class="ng-binding">{{hotel.name | limitTo:25}} ...</h2>
                                            </div>

                                            <div class="pull-left star">
                                                <span ng-repeat="n in createArray(hotel.hotelstar) track by $index" class="glyphicon glyphicon-star">

                                                </span>
                                            </div>
                                        </div>
                                        <div class="clearfix">
                                            <div class="pull-left mapicon">
                                                <p>
                                                    <i class="fa fa-map-marker"></i>
                                                </p>
                                            </div>
                                            <div class="pull-left maptext">
                                                <p>
                                                    <span class="cityname ng-binding">{{hotel.city}},{{hotel.destinationName}}</span><span> </span>
                                                </p>
                                                <p>
                                                    <span class="cityname ng-binding">{{hotel.categoryName}}</span><span> </span>

                                                </p>
                                            </div>
                                        </div>

                                        <div class="clearfix hidden-xs hotdeal">
                                            <div class="pull-left ">
                                                <p>
                                                    <span class="icon-no-available-o">
                                                        <i class="fa fa-cutlery"></i>
                                                    </span>

                                                    <span class="available-text"> {{hotel.rooms[0].rates[0].boardName}}  </span>
                                                </p>
                                            </div>
                                            <div class="pull-left padding-left-24">
                                                <p>
                                                    <span class="icon-available-o">
                                                        <i class="fa fa-bed"></i>
                                                    </span>
                                                    <span class="available-text ng-binding">{{hotel.rooms[0].name}}</span>
                                                </p>
                                            </div>
                                        </div>

                                        <div class="clearfix hidden-xs hotdeal">
                                            <div class="pull-left ">
                                                <p>
                                                    <span class="icon-no-available-o">
                                                        <i class="fa fa-cutlery"></i>
                                                    </span>

                                                    <span class="available-text"> {{hotel.description | limitTo:100}} ...  </span>
                                                </p>
                                            </div>

                                        </div>

                                        <div class="clearfix hotdeal">
                                            @*<div class="pull-left ">
                                                    <p>
                                                        <span class="hotdealbox">{{hotel.rooms[0].rates[0].offers[0].name}}</span>
                                                        <span class="bullet"></span>
                                                        <span class="pro_img padding-left-8">
                                                        </span>
                                                    </p>
                                                </div>*@
                                            <div class="pull-left padding-left-8 hotdealpro">
                                                @*<p ng-show="{{hotel.rooms[0].rates[0].offers[0].name}} == null" class="ng-scope">{{hotel.currency}} {{hotel.rooms[0].rates[0].offers[0].amount}}</p>*@<!-- end ngIf: city !== 'MV' -->
                                            </div>
                                        </div>

                                    </div>
                                    <!-- ===================== End hotel details ======================== -->
                                    <!-- ======================= Start price box ========================== -->

                                    <div class="pull-right col-cm-4 detail-box">
                                        <div class="clearfix pricing-box">
                                            <p class="numberofleft"><span ng-show="hotel.hotel_allotment <= 5" class="ng-binding ng-hide">99 rooms left !</span></p>
                                            <p class="pricenight">From</p>
                                            <p class="hotel_price ng-binding"> LKR {{(hotel.minRate)}} </p>

                                            <p class="text-right padding-bottom-8">


                                                @*target="_blank" open in new tab *@


                                                @*<button target="_blank" type="button" class="btn btn-success" data-ng-click="setTab(hotel.code,respDatapara.Des,respDatapara.DepartureDate,respDatapara.ReturnDate,respDatapara.Rooms,respDatapara.Adults1,respDatapara.Children1,respDatapara.Age1)">Check Availability</button>*@

                                            <p class="text-right padding-bottom-8">


                                                @*<a href="http://72.9.159.12:8082/Home/Hotel?HotelCode={{hotel.code}}&Destination={{respDatapara.Des}}&DepartureDate={{respDatapara.DepartureDate}}&ReturnDate={{respDatapara.ReturnDate}}&Rooms={{respDatapara.Rooms}}&Occupancy={{respDatapara.Adults1}}" class="btn btn-success"> Select Room </a>*@
                                                @*<a href="http://localhost:13668/Home/Hotel?HotelCode={{hotel.code}}&Destination={{respDatapara.Des}}&DepartureDate={{respDatapara.DepartureDate}}&ReturnDate={{respDatapara.ReturnDate}}&Rooms={{respDatapara.Rooms}}&Occupancy={{respDatapara.Adults1}}" class="btn btn-success"> Select Room </a>*@
                                                <a class="btn btn-success" ng-href="@Url.Action("Hotel", "home")?HotelCode={{hotel.code}}&Destination={{respDatapara.Des}}&DepartureDate={{respDatapara.DepartureDate}}&ReturnDate={{respDatapara.ReturnDate}}&Rooms={{respDatapara.Rooms}}&Adults1={{respDatapara.Adults1}}&Children1={{respDatapara.Children1}}&C1Age1={{respDatapara.C1Age1}}&C1Age2={{respDatapara.C1Age2}}&C1Age3={{respDatapara.C1Age3}}&C1Age4={{respDatapara.C1Age4}}&Adults2={{respDatapara.Adults2}}&Children2={{respDatapara.Children2}}&C2Age1={{respDatapara.C2Age1}}&C2Age2={{respDatapara.C2Age2}}&C2Age3={{respDatapara.C2Age3}}&C2Age4={{respDatapara.C2Age4}}&Adults3={{respDatapara.Adults3}}&Children3={{respDatapara.Children3}}&C3Age1={{respDatapara.C3Age1}}&C3Age2={{respDatapara.C3Age2}}&C3Age3={{respDatapara.C3Age3}}&C3Age4={{respDatapara.C3Age4}}"> Check Availability </a>




                                            </p>


                                            @*  *@
                                            <p class="pricenight">Price for 1 night</p>
                                        </div>
                                    </div>
                                    <!-- =================== End price box ======================== -->

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>

</div>

<script src="~/Scripts/jquery-1.10.2.js"></script>

@section Scripts{

}




@*<script src="~/Scripts/angular.js"></script>
    <script src="~/Scripts/angular-route.js"></script>*@
<script src="~/Scripts/API/Module.js"></script>
<script src="~/Scripts/API/Service.js"></script>
<script src="~/Scripts/API/Controller.js"></script>
