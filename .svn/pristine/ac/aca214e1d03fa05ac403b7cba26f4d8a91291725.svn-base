var app = angular.module('HotelBookingModule', []);

app.service('hotelBookingService', function ($http) {

    this.getList = function (sub) { 

        return $http({
            method: "POST",
            data: sub,
            contentType: "application/json; charset=utf-8",
           url: "/api/HotelBooking/getBookingList"
        });


    };



    this.getDetailList = function (Reference) {

        return $http({
            method: "POST",
            data: Reference,
            contentType: "application/json; charset=utf-8",
            url: "/api/HotelBooking/getBookingDetailList?reference=" + Reference
        });


    };

    
});

app.controller('HotelBooikingCtrl', function ($scope, $http, $window, hotelBookingService) {

   
    //$scope.start = new Date().toString("yyyy-MM-dd");
    //$scope.end = new Date().toString("yyyy-MM-dd");;
    $scope.statuslist = ['ALL', 'CONFIRMED', 'CANCELLED'];
    $scope.filterTypeOption = ['CHECKIN', 'CREATION'];
    $scope.from = 1;
    $scope.to = 100;
    $scope.clientReference = "";
    $scope.country = "";
    $scope.destination = "";
    $scope.hotel = "";
 
    $scope.status = "ALL";
    $scope.filterType = "CREATION";
   
    $scope.respData = [];
   
    $scope.getHotelBooking = function () {

            var sub = {
                start: $scope.start,
                end: $scope.end,
                status: $scope.status,
                filterType: $scope.filterType,
                from: $scope.from,
                to: $scope.to,
                clientReference: $scope.clientReference,
                country: $scope.country,
                destination: $scope.destination,
                hotel: $scope.hotel,

            };

            var getHotelBooking = hotelBookingService.getList(sub)


            getHotelBooking.then(function (d) {

            console.log("Succss");

            $scope.respData = d.data.bookings;
        }, function (error) {
            console.log("Oops! Something went wrong while fetching the data.");
        });
    }


    $scope.getHotelBookingDetails = function (Reference) {

        var getHotelBookingDetails = hotelBookingService.getDetailList(Reference)


        getHotelBookingDetails.then(function (d) {

            console.log("Succss");

            $scope.respData = d.data.bookings;
        }, function (error) {
            console.log("Oops! Something went wrong while fetching the data.");
        });
    }

});